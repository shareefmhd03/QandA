{%  extends 'admin/admin_base.html' %}
{% load static %}

{% block content %}
      <div class="main-panel">
        <div class="content-wrapper">
          <div class="row">
            
            <div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Bordered table</h4>
                  <!-- <p class="card-description">
                    Add class <code>.table-bordered</code>
                  </p> -->
                  <div class="table-responsive pt-3">
                    <table class="table table-bordered ">
                      <thead>
                        <tr>
                          <th>
                            ID
                          </th>
                          <th>
                            Username
                          </th>
                          <th>
                            Name
                          </th>
                          <th>
                            Email
                          </th>
                          <th>
                            Last Login
                          </th>
                          <th>
                            Status
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for user in users %}
                        <tr>
                          <td>
                            {{user.id}}
                          </td>
                          <td>
                            {{user.username}}
                          </td>
                          <td>
                            {{user.first_name}}{{user.last_name}}
                          </td>
                          <td>
                            {{user.email}}
                          </td>
                          <td>
                            {{user.last_login}}
                          </td>
                          {% if user.is_active %}
                          <td>
                            <p style="color: green;">Active</p>
                            <a class="btn btn-sm btn-danger status">Block</a>
                          </td>
                          {% else %}
                          <td>
                            <p style="color: red;">Blocked</p>
                            
                            <a class="btn btn-sm btn-primary status">Unblock</a>
                          </td>
                          {% endif %}
                        </tr>

                        
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- content-wrapper ends -->



        <script>
          $('.status').click(function() {
        console.log('hello')
        // const a = this.value
        console.log(this.value)
        data = {
          'data':this.value,
          'csrfmiddlewaretoken': '{{ csrf_token }}'
        }
        const url = "{% url 'voting_down' %}"
          $.ajax({
            type: "POST",
            url: url,
            data: data,
            success: function(data) {
        //       location.reload();
        alert('success')
            },
          })
        });
        </script>
      {% endblock %}